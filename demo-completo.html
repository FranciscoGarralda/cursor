<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alliance F&R - Sistema Integral</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
            min-height: 100vh;
        }
        
        .shadow-custom {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .hover-scale {
            transition: transform 0.2s ease-in-out;
        }
        
        .hover-scale:hover {
            transform: scale(1.02);
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .success-message {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Iconos SVG simplificados
        const iconComponents = {
            Plus: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                </svg>
            ),
            Users: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z" />
                </svg>
            ),
            Wallet: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3" />
                </svg>
            ),
            List: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                </svg>
            ),
            DollarSign: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            TrendingUp: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941" />
                </svg>
            ),
            CreditCard: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0119.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z" />
                </svg>
            ),
            Receipt: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" />
                </svg>
            ),
            Building2: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3.75 21h16.5M4.5 3h15l-.75 18h-13.5L4.5 3z" />
                </svg>
            ),
            UserCheck: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
            ),
            ArrowUpDown: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4" />
                </svg>
            ),
            ArrowLeft: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
                </svg>
            ),
            Search: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            ),
            Edit3: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                </svg>
            ),
            Phone: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
            ),
            MapPin: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
                </svg>
            ),
            Bell: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
                </svg>
            ),
            User: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
            ),
            Trash2: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2M10 11v6M14 11v6" />
                </svg>
            ),
            Check: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                </svg>
            ),
            Save: ({ size = 24, className = "" }) => (
                <svg className={className} width={size} height={size} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3-3-3m3-3v12" />
                </svg>
            )
        };

        // Sistema Principal
        const AllianceSystem = () => {
            const [vistaActual, setVistaActual] = useState('menu');
            const [showSuccess, setShowSuccess] = useState(false);
            
            // Estados para operaciones
            const [operacionesGuardadas, setOperacionesGuardadas] = useState([]);
            
            // Estados para clientes 
            const [clientes, setClientes] = useState([
                {
                    id: 1,
                    nombre: 'Juan',
                    apellido: 'P√©rez',
                    telefono: '+54 9 11 1234-5678',
                    direccion: 'Av. Corrientes 1234, CABA',
                    dni: '12.345.678',
                    ultimaOperacion: '2024-12-15',
                    totalOperaciones: 25,
                    volumenTotal: 45000,
                    operaciones: [
                        { fecha: '2024-11-01' },
                        { fecha: '2024-11-16' },
                        { fecha: '2024-12-01' },
                        { fecha: '2024-12-15' }
                    ]
                },
                {
                    id: 2,
                    nombre: 'Mar√≠a',
                    apellido: 'Gonz√°lez',
                    telefono: '+54 9 11 8765-4321',
                    direccion: 'Belgrano 567, CABA',
                    dni: '87.654.321',
                    ultimaOperacion: '2024-11-20',
                    totalOperaciones: 12,
                    volumenTotal: 28000,
                    operaciones: [
                        { fecha: '2024-09-15' },
                        { fecha: '2024-10-20' },
                        { fecha: '2024-11-20' }
                    ]
                }
            ]);

            const mostrarMensajeExito = (mensaje) => {
                setShowSuccess(mensaje);
                setTimeout(() => setShowSuccess(false), 3000);
            };

            const volverAlMenu = () => {
                setVistaActual('menu');
            };

            const abrirOperaciones = () => {
                setVistaActual('operaciones');
            };

            const abrirClientes = () => {
                setVistaActual('clientes');
            };

            const guardarOperacion = (operacion) => {
                setOperacionesGuardadas(prev => [...prev, operacion]);
                mostrarMensajeExito('¬°Operaci√≥n guardada exitosamente!');
            };

            const guardarCliente = (cliente) => {
                if (cliente.id && clientes.find(c => c.id === cliente.id)) {
                    setClientes(clientes.map(c => c.id === cliente.id ? cliente : c));
                } else {
                    setClientes([...clientes, { ...cliente, id: Date.now() }]);
                }
                mostrarMensajeExito('¬°Cliente guardado exitosamente!');
            };

            const eliminarCliente = (clienteId) => {
                setClientes(clientes.filter(c => c.id !== clienteId));
                mostrarMensajeExito('Cliente eliminado');
            };

            return (
                <div className="gradient-bg">
                    {/* Mensaje de √©xito global */}
                    {showSuccess && (
                        <div className="fixed top-4 right-4 z-50 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg flex items-center success-message">
                            <iconComponents.Check size={20} className="mr-2" />
                            <span className="text-sm">{showSuccess}</span>
                        </div>
                    )}

                    {/* Renderizado condicional seg√∫n la vista */}
                    {vistaActual === 'menu' && (
                        <MenuPrincipal 
                            onNavigate={(seccion) => {
                                if (seccion === 'nuevo') abrirOperaciones();
                                else if (seccion === 'clientes') abrirClientes();
                                else mostrarMensajeExito(`Navegando a ${seccion} - Pr√≥ximamente disponible`);
                            }}
                        />
                    )}

                    {vistaActual === 'operaciones' && (
                        <SistemaOperaciones 
                            onBack={volverAlMenu}
                            onSave={guardarOperacion}
                            operacionesGuardadas={operacionesGuardadas}
                        />
                    )}

                    {vistaActual === 'clientes' && (
                        <SistemaClientes 
                            clientes={clientes}
                            onBack={volverAlMenu}
                            onSave={guardarCliente}
                            onDelete={eliminarCliente}
                        />
                    )}
                </div>
            );
        };

        // Componente Men√∫ Principal
        const MenuPrincipal = ({ onNavigate }) => {
            const [activeItem, setActiveItem] = useState(null);

            const menuItems = [
                { id: 'nuevo', icon: 'Plus', title: 'Nuevo Movimiento', color: 'bg-blue-500' },
                { id: 'saldos', icon: 'Wallet', title: 'Saldos', color: 'bg-green-500' },
                { id: 'movimientos', icon: 'List', title: 'Movimientos', color: 'bg-purple-500' },
                { id: 'cuentas', icon: 'Building2', title: 'Cuentas Corrientes', color: 'bg-orange-500' },
                { id: 'arbitraje', icon: 'ArrowUpDown', title: 'Arbitraje', color: 'bg-red-500' },
                { id: 'utilidad', icon: 'TrendingUp', title: 'Utilidad', color: 'bg-indigo-500' },
                { id: 'comisiones', icon: 'DollarSign', title: 'Comisiones', color: 'bg-yellow-500' },
                { id: 'prestamistas', icon: 'CreditCard', title: 'Prestamistas', color: 'bg-pink-500' },
                { id: 'gastos', icon: 'Receipt', title: 'Gastos', color: 'bg-gray-500' },
                { id: 'clientes', icon: 'UserCheck', title: 'Clientes', color: 'bg-cyan-500' }
            ];

            const handleItemClick = (itemId) => {
                setActiveItem(itemId);
                setTimeout(() => {
                    setActiveItem(null);
                    onNavigate(itemId);
                }, 200);
            };

            const MenuItem = ({ item, isActive }) => {
                const IconComponent = iconComponents[item.icon];
                return (
                    <button 
                        className={`
                            w-full aspect-square rounded-2xl transition-all duration-200 hover-scale
                            ${isActive 
                                ? `${item.color} text-white scale-95` 
                                : 'bg-white text-gray-700 hover:bg-gray-50 active:bg-gray-100'
                            }
                            shadow-custom border border-gray-200 flex flex-col items-center justify-center gap-2
                        `}
                        onClick={() => handleItemClick(item.id)}
                    >
                        <IconComponent size={24} />
                        <span className="text-xs font-medium leading-tight text-center px-1">{item.title}</span>
                    </button>
                );
            };

            return (
                <div className="min-h-screen flex flex-col">
                    {/* Header */}
                    <div className="bg-white border-b border-gray-200 px-6 py-4 flex-shrink-0 shadow-custom">
                        <h1 className="text-2xl font-bold text-gray-900 text-center">Alliance F&R</h1>
                        <p className="text-sm text-gray-600 text-center mt-1">Sistema Integral de Operaciones</p>
                    </div>

                    {/* Menu Grid */}
                    <div className="flex-1 p-4 animate-fade-in">
                        <div className="grid grid-cols-3 gap-4 max-w-sm mx-auto">
                            {menuItems.slice(0, 9).map((item) => (
                                <MenuItem
                                    key={item.id}
                                    item={item}
                                    isActive={activeItem === item.id}
                                />
                            ))}
                        </div>
                        
                        {/* Fila adicional para el d√©cimo elemento */}
                        <div className="grid grid-cols-3 gap-4 max-w-sm mx-auto mt-4">
                            <div></div>
                            <MenuItem
                                item={menuItems[9]}
                                isActive={activeItem === menuItems[9].id}
                            />
                            <div></div>
                        </div>
                    </div>

                    {/* Footer */}
                    <div className="bg-white border-t border-gray-200 px-6 py-3 text-center">
                        <p className="text-xs text-gray-500">Sistema desarrollado para Alliance F&R</p>
                    </div>
                </div>
            );
        };

        // Componente Sistema de Operaciones (simplificado del anterior)
        const SistemaOperaciones = ({ onBack, onSave, operacionesGuardadas }) => {
            // Base de datos simulada de clientes
            const clientesDB = [
                'Juan P√©rez', 'Mar√≠a Garc√≠a', 'Carlos L√≥pez', 'Ana Mart√≠nez',
                'Pedro Rodriguez', 'Laura Fern√°ndez', 'Diego S√°nchez', 'Sof√≠a Gonz√°lez'
            ];

            const monedas = [
                { value: '', label: 'Seleccionar moneda' },
                { value: 'PESO', label: 'üá¶üá∑ PESO' },
                { value: 'USD', label: 'üíµ USD' },
                { value: 'EURO', label: 'üá™üá∫ EURO' },
                { value: 'USDT', label: '‚Çø USDT' }
            ];

            const operaciones = {
                'TRANSACCIONES': { 
                    icon: 'üí±', 
                    subMenu: ['COMPRA', 'VENTA', 'ARBITRAJE']
                },
                'CUENTAS_CORRIENTES': { 
                    icon: 'ü§ù', 
                    subMenu: ['ALL', 'ME', 'SS', 'AL']
                },
                'SOCIOS': { 
                    icon: 'üë•', 
                    subMenu: ['Ingreso', 'Salida', 'Prestamo', 'Devoluci√≥n']
                }
            };

            const [formData, setFormData] = useState({
                cliente: '',
                fecha: new Date().toISOString().split('T')[0],
                detalle: '',
                operacion: '',
                subOperacion: '',
                monto: '',
                moneda: '',
                tc: '',
                total: ''
            });

            const [clientesSugeridos, setClientesSugeridos] = useState([]);
            const [mostrarSugerencias, setMostrarSugerencias] = useState(false);

            // Filtrar clientes mientras escribe
            const handleClienteChange = (value) => {
                setFormData(prev => ({ ...prev, cliente: value }));
                
                if (value.length > 0) {
                    const sugerencias = clientesDB.filter(cliente => 
                        cliente.toLowerCase().includes(value.toLowerCase())
                    );
                    setClientesSugeridos(sugerencias);
                    setMostrarSugerencias(true);
                } else {
                    setMostrarSugerencias(false);
                }
            };

            const seleccionarCliente = (cliente) => {
                setFormData(prev => ({ ...prev, cliente }));
                setMostrarSugerencias(false);
            };

            // Calcular total autom√°ticamente
            useEffect(() => {
                if (formData.subOperacion === 'COMPRA' || formData.subOperacion === 'VENTA') {
                    const monto = parseFloat(formData.monto) || 0;
                    const tc = parseFloat(formData.tc) || 0;
                    
                    if (monto > 0 && tc > 0) {
                        const total = (monto * tc).toFixed(2);
                        setFormData(prev => ({ ...prev, total }));
                    }
                }
            }, [formData.monto, formData.tc, formData.subOperacion]);

            const handleInputChange = (field, value) => {
                if (field === 'operacion') {
                    setFormData(prev => ({
                        ...prev,
                        [field]: value,
                        subOperacion: ''
                    }));
                } else {
                    setFormData(prev => ({
                        ...prev,
                        [field]: value
                    }));
                }
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                const operacion = { ...formData, id: Date.now() };
                onSave(operacion);
                
                // Limpiar formulario
                setFormData({
                    cliente: '',
                    fecha: new Date().toISOString().split('T')[0],
                    detalle: '',
                    operacion: '',
                    subOperacion: '',
                    monto: '',
                    moneda: '',
                    tc: '',
                    total: ''
                });
            };

            const getNombreDia = (fecha) => {
                const dias = ['Domingo', 'Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado'];
                const date = new Date(fecha + 'T00:00:00');
                return dias[date.getDay()];
            };

            const getLabels = () => {
                if (formData.subOperacion === 'COMPRA') {
                    return {
                        montoLabel: 'MONTO (INGRESO)',
                        totalLabel: 'TOTAL (EGRESO)'
                    };
                } else if (formData.subOperacion === 'VENTA') {
                    return {
                        montoLabel: 'MONTO (EGRESO)',
                        totalLabel: 'TOTAL (INGRESO)'
                    };
                }
                return { montoLabel: 'MONTO', totalLabel: 'TOTAL' };
            };

            const labels = getLabels();

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <div className="bg-white border-b border-gray-200 px-4 py-4 shadow-custom">
                        <div className="flex items-center gap-3 max-w-6xl mx-auto">
                            <button onClick={onBack} className="p-2 hover:bg-gray-100 rounded-lg">
                                <iconComponents.ArrowLeft size={20} />
                            </button>
                            <h1 className="text-lg font-semibold text-gray-900">Nuevo Movimiento</h1>
                        </div>
                    </div>

                    <div className="max-w-4xl mx-auto p-4">
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            {/* Formulario */}
                            <div className="lg:col-span-2">
                                <form onSubmit={handleSubmit} className="bg-white rounded-xl shadow-custom p-6">
                                    <div className="space-y-4">
                                        {/* CLIENTE con autocompletado */}
                                        <div className="relative">
                                            <label className="block text-sm font-medium text-gray-700 mb-1">CLIENTE *</label>
                                            <input
                                                type="text"
                                                value={formData.cliente}
                                                onChange={(e) => handleClienteChange(e.target.value)}
                                                onBlur={() => setTimeout(() => setMostrarSugerencias(false), 200)}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                placeholder="Buscar cliente..."
                                            />
                                            {mostrarSugerencias && clientesSugeridos.length > 0 && (
                                                <div className="absolute z-10 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1 max-h-40 overflow-y-auto">
                                                    {clientesSugeridos.map((cliente, index) => (
                                                        <div
                                                            key={index}
                                                            onClick={() => seleccionarCliente(cliente)}
                                                            className="px-3 py-2 hover:bg-blue-50 cursor-pointer"
                                                        >
                                                            {cliente}
                                                        </div>
                                                    ))}
                                                </div>
                                            )}
                                        </div>

                                        {/* FECHA */}
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">
                                                FECHA * - <span className="text-blue-600">{getNombreDia(formData.fecha)}</span>
                                            </label>
                                            <input
                                                type="date"
                                                value={formData.fecha}
                                                onChange={(e) => handleInputChange('fecha', e.target.value)}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                        </div>

                                        {/* OPERACI√ìN */}
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">OPERACI√ìN *</label>
                                            <select
                                                value={formData.operacion}
                                                onChange={(e) => handleInputChange('operacion', e.target.value)}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            >
                                                <option value="">Seleccionar operaci√≥n</option>
                                                {Object.entries(operaciones).map(([key, op]) => (
                                                    <option key={key} value={key}>
                                                        {op.icon} {key.replace('_', ' ')}
                                                    </option>
                                                ))}
                                            </select>
                                        </div>

                                        {/* SUB-OPERACI√ìN */}
                                        {formData.operacion && operaciones[formData.operacion] && (
                                            <div className="animate-fade-in">
                                                <label className="block text-sm font-medium text-gray-700 mb-1">DETALLE OPERACI√ìN *</label>
                                                <select
                                                    value={formData.subOperacion}
                                                    onChange={(e) => handleInputChange('subOperacion', e.target.value)}
                                                    className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                >
                                                    <option value="">Seleccionar detalle</option>
                                                    {operaciones[formData.operacion].subMenu.map(subOp => (
                                                        <option key={subOp} value={subOp}>
                                                            {subOp}
                                                        </option>
                                                    ))}
                                                </select>
                                            </div>
                                        )}

                                        {/* CAMPOS DIN√ÅMICOS PARA TRANSACCIONES */}
                                        {formData.operacion === 'TRANSACCIONES' && (formData.subOperacion === 'COMPRA' || formData.subOperacion === 'VENTA') && (
                                            <div className="space-y-4 animate-fade-in">
                                                <div className="grid grid-cols-2 gap-4">
                                                    <div>
                                                        <label className="block text-sm font-medium text-gray-700 mb-1">{labels.montoLabel} *</label>
                                                        <input
                                                            type="number"
                                                            step="0.01"
                                                            value={formData.monto}
                                                            onChange={(e) => handleInputChange('monto', e.target.value)}
                                                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                            placeholder="0.00"
                                                        />
                                                    </div>
                                                    <div>
                                                        <label className="block text-sm font-medium text-gray-700 mb-1">MONEDA *</label>
                                                        <select
                                                            value={formData.moneda}
                                                            onChange={(e) => handleInputChange('moneda', e.target.value)}
                                                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                        >
                                                            {monedas.map(moneda => (
                                                                <option key={moneda.value} value={moneda.value}>
                                                                    {moneda.label}
                                                                </option>
                                                            ))}
                                                        </select>
                                                    </div>
                                                </div>
                                                <div>
                                                    <label className="block text-sm font-medium text-gray-700 mb-1">TC *</label>
                                                    <input
                                                        type="number"
                                                        step="0.01"
                                                        value={formData.tc}
                                                        onChange={(e) => handleInputChange('tc', e.target.value)}
                                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                        placeholder="Tipo de cambio"
                                                    />
                                                </div>
                                                <div>
                                                    <label className="block text-sm font-medium text-gray-700 mb-1">
                                                        {labels.totalLabel} * 
                                                        {formData.total && <span className="ml-2 text-blue-600 font-bold">= ${formData.total}</span>}
                                                    </label>
                                                    <input
                                                        type="number"
                                                        step="0.01"
                                                        value={formData.total}
                                                        readOnly
                                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg bg-blue-50 text-blue-800 font-semibold"
                                                        placeholder="Calculado autom√°ticamente"
                                                    />
                                                </div>
                                            </div>
                                        )}

                                        {/* BOT√ìN GUARDAR */}
                                        {formData.subOperacion && (
                                            <div className="pt-4 animate-fade-in">
                                                <button
                                                    type="submit"
                                                    className="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2 hover-scale"
                                                >
                                                    <iconComponents.Check size={20} />
                                                    <span>Guardar Operaci√≥n</span>
                                                </button>
                                            </div>
                                        )}
                                    </div>
                                </form>
                            </div>

                            {/* Panel lateral con resumen */}
                            <div className="space-y-6">
                                <div className="bg-white rounded-xl shadow-custom p-6">
                                    <h3 className="text-lg font-semibold text-gray-900 mb-4">üìä Resumen</h3>
                                    <div className="space-y-3">
                                        <div className="flex justify-between items-center p-2 bg-blue-50 rounded-lg">
                                            <span className="text-sm text-gray-600">Total operaciones:</span>
                                            <span className="font-bold text-blue-600">{operacionesGuardadas.length}</span>
                                        </div>
                                    </div>
                                </div>

                                {operacionesGuardadas.length > 0 && (
                                    <div className="bg-white rounded-xl shadow-custom p-6">
                                        <h3 className="text-lg font-semibold text-gray-900 mb-4">üìã Recientes</h3>
                                        <div className="space-y-3 max-h-60 overflow-y-auto">
                                            {operacionesGuardadas.slice(-3).reverse().map((op) => (
                                                <div key={op.id} className="bg-gradient-to-r from-gray-50 to-blue-50 p-3 rounded-lg">
                                                    <div className="font-medium text-gray-900">{op.cliente}</div>
                                                    <div className="text-sm text-gray-600">{op.operacion} - {op.subOperacion}</div>
                                                    <div className="text-xs text-gray-500">{op.fecha}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Componente Sistema de Clientes (versi√≥n simplificada)
        const SistemaClientes = ({ clientes, onBack, onSave, onDelete }) => {
            const [vista, setVista] = useState('lista');
            const [clienteEditando, setClienteEditando] = useState(null);
            const [busqueda, setBusqueda] = useState('');

            const calcularFrecuencia = (cliente) => {
                if (!cliente.operaciones || cliente.operaciones.length < 2) return 30;
                
                const fechas = cliente.operaciones.map(op => new Date(op.fecha)).sort((a, b) => a - b);
                let totalDias = 0;
                
                for (let i = 1; i < fechas.length; i++) {
                    const diasEntre = Math.floor((fechas[i] - fechas[i-1]) / (1000 * 60 * 60 * 24));
                    totalDias += diasEntre;
                }
                
                return Math.round(totalDias / (fechas.length - 1));
            };

            const getEstadoContacto = (cliente) => {
                if (!cliente.ultimaOperacion) return { color: 'bg-gray-100 text-gray-600', texto: 'Sin datos' };
                
                const dias = Math.floor((new Date() - new Date(cliente.ultimaOperacion)) / (1000 * 60 * 60 * 24));
                const frecuencia = calcularFrecuencia(cliente);
                
                if (dias > frecuencia * 1.5) return { color: 'bg-red-100 text-red-600', texto: 'Contactar urgente' };
                if (dias > frecuencia) return { color: 'bg-yellow-100 text-yellow-600', texto: 'Contactar pronto' };
                return { color: 'bg-green-100 text-green-600', texto: 'Activo' };
            };

            const clientesFiltrados = clientes.filter(cliente =>
                `${cliente.nombre} ${cliente.apellido}`.toLowerCase().includes(busqueda.toLowerCase()) ||
                cliente.telefono.includes(busqueda) ||
                cliente.dni.includes(busqueda)
            );

            const crearNuevoCliente = () => {
                setClienteEditando(null);
                setVista('form');
            };

            const editarCliente = (cliente) => {
                setClienteEditando(cliente);
                setVista('form');
            };

            const volverALista = () => {
                setVista('lista');
                setClienteEditando(null);
            };

            if (vista === 'form') {
                return <FormularioCliente cliente={clienteEditando} onSave={onSave} onCancel={volverALista} onBack={onBack} />;
            }

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <div className="bg-white border-b border-gray-200 px-4 py-4 shadow-custom">
                        <div className="flex items-center justify-between max-w-6xl mx-auto">
                            <div className="flex items-center gap-3">
                                <button onClick={onBack} className="p-2 hover:bg-gray-100 rounded-lg">
                                    <iconComponents.ArrowLeft size={20} />
                                </button>
                                <h1 className="text-lg font-semibold text-gray-900">Clientes</h1>
                            </div>
                            <button onClick={crearNuevoCliente} className="p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                <iconComponents.Plus size={20} />
                            </button>
                        </div>
                    </div>

                    <div className="max-w-6xl mx-auto p-4">
                        {/* B√∫squeda */}
                        <div className="bg-white rounded-xl shadow-custom p-4 mb-4">
                            <div className="relative">
                                <iconComponents.Search size={20} className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400" />
                                <input
                                    type="text"
                                    placeholder="Buscar por nombre, tel√©fono o DNI..."
                                    className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    value={busqueda}
                                    onChange={(e) => setBusqueda(e.target.value)}
                                />
                            </div>
                        </div>

                        {/* Lista de clientes */}
                        <div className="space-y-4">
                            {clientesFiltrados.length === 0 ? (
                                <div className="bg-white rounded-xl shadow-custom p-8 text-center">
                                    <iconComponents.User size={48} className="mx-auto text-gray-300 mb-4" />
                                    <p className="text-gray-500">No se encontraron clientes</p>
                                </div>
                            ) : (
                                clientesFiltrados.map((cliente) => (
                                    <ClienteCard
                                        key={cliente.id}
                                        cliente={cliente}
                                        onEdit={editarCliente}
                                        onDelete={onDelete}
                                        calcularFrecuencia={calcularFrecuencia}
                                        getEstadoContacto={getEstadoContacto}
                                    />
                                ))
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // Componente ClienteCard
        const ClienteCard = ({ cliente, onEdit, onDelete, calcularFrecuencia, getEstadoContacto }) => {
            const getDiasDesdeUltimaOperacion = () => {
                if (!cliente.ultimaOperacion) return 'Nunca';
                const dias = Math.floor((new Date() - new Date(cliente.ultimaOperacion)) / (1000 * 60 * 60 * 24));
                return `${dias} d√≠as`;
            };

            const estado = getEstadoContacto(cliente);
            const frecuencia = calcularFrecuencia(cliente);

            return (
                <div className="bg-white rounded-xl shadow-custom p-4 hover-scale">
                    <div className="flex items-start justify-between mb-3">
                        <div className="flex-1">
                            <h3 className="font-semibold text-gray-900">{cliente.nombre} {cliente.apellido}</h3>
                            <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${estado.color} mt-1`}>
                                {estado.texto}
                            </span>
                        </div>
                        <div className="flex items-center gap-2">
                            <button onClick={() => onEdit(cliente)} className="p-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                                <iconComponents.Edit3 size={16} />
                            </button>
                            <button 
                                onClick={() => {
                                    if (confirm(`¬øEliminar a ${cliente.nombre} ${cliente.apellido}?`)) {
                                        onDelete(cliente.id);
                                    }
                                }} 
                                className="p-2 text-red-600 hover:bg-red-50 rounded-lg"
                            >
                                <iconComponents.Trash2 size={16} />
                            </button>
                        </div>
                    </div>

                    <div className="space-y-2 text-sm text-gray-600 mb-3">
                        <div className="flex items-center gap-2">
                            <iconComponents.Phone size={14} />
                            <span>{cliente.telefono}</span>
                        </div>
                        <div className="flex items-center gap-2">
                            <iconComponents.CreditCard size={14} />
                            <span>DNI: {cliente.dni}</span>
                        </div>
                        <div className="flex items-center gap-2">
                            <iconComponents.MapPin size={14} />
                            <span className="truncate">{cliente.direccion}</span>
                        </div>
                    </div>

                    <div className="border-t pt-3 flex justify-between text-xs text-gray-500">
                        <span>√öltima operaci√≥n: {getDiasDesdeUltimaOperacion()}</span>
                        <span>Cada {frecuencia} d√≠as ‚Ä¢ {cliente.totalOperaciones || 0} ops</span>
                    </div>
                </div>
            );
        };

        // Componente FormularioCliente
        const FormularioCliente = ({ cliente, onSave, onCancel, onBack }) => {
            const [formData, setFormData] = useState({
                nombre: cliente?.nombre || '',
                apellido: cliente?.apellido || '',
                telefono: cliente?.telefono || '',
                direccion: cliente?.direccion || '',
                dni: cliente?.dni || ''
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!formData.nombre || !formData.apellido || !formData.telefono || !formData.dni || !formData.direccion) {
                    alert('Por favor complete todos los campos obligatorios');
                    return;
                }
                onSave({ ...cliente, ...formData, id: cliente?.id || Date.now() });
                onCancel();
            };

            return (
                <div className="min-h-screen">
                    <div className="bg-white border-b border-gray-200 px-4 py-4 shadow-custom">
                        <div className="flex items-center gap-3 max-w-6xl mx-auto">
                            <button onClick={onCancel} className="p-2 hover:bg-gray-100 rounded-lg">
                                <iconComponents.ArrowLeft size={20} />
                            </button>
                            <h1 className="text-lg font-semibold text-gray-900">
                                {cliente ? 'Editar Cliente' : 'Nuevo Cliente'}
                            </h1>
                        </div>
                    </div>
                    
                    <div className="max-w-2xl mx-auto p-4">
                        <form onSubmit={handleSubmit} className="bg-white rounded-xl shadow-custom p-6">
                            <div className="space-y-4">
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">Nombre *</label>
                                        <input
                                            type="text"
                                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            value={formData.nombre}
                                            onChange={(e) => setFormData({...formData, nombre: e.target.value})}
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">Apellido *</label>
                                        <input
                                            type="text"
                                            className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            value={formData.apellido}
                                            onChange={(e) => setFormData({...formData, apellido: e.target.value})}
                                        />
                                    </div>
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Tel√©fono *</label>
                                    <input
                                        type="tel"
                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        value={formData.telefono}
                                        onChange={(e) => setFormData({...formData, telefono: e.target.value})}
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">DNI *</label>
                                    <input
                                        type="text"
                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        value={formData.dni}
                                        onChange={(e) => setFormData({...formData, dni: e.target.value})}
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">Direcci√≥n *</label>
                                    <input
                                        type="text"
                                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        value={formData.direccion}
                                        onChange={(e) => setFormData({...formData, direccion: e.target.value})}
                                    />
                                </div>

                                <div className="flex gap-4 pt-4">
                                    <button 
                                        type="button" 
                                        onClick={onCancel} 
                                        className="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"
                                    >
                                        Cancelar
                                    </button>
                                    <button 
                                        type="submit" 
                                        className="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
                                    >
                                        Guardar
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            );
        };

        // Renderizar la aplicaci√≥n principal
        ReactDOM.render(<AllianceSystem />, document.getElementById('root'));
    </script>
</body>
</html>